{% extends "base.html" %}
{% block title %}Diagramm{% endblock %}
{% block content %}

<div class="container">
  <!-- Jahr-Filter -->
    <h2>Finanzverlauf</h2>

  
  <form method="get" action="{{ url_for('diagramm') }}" style="margin-bottom: 25px; text-align: center;">
    <label style="font-weight: 600; margin-right: 10px;">Jahr anzeigen:</label>
    <select name="jahr" class="jahr-select" onchange="this.form.submit()">
      <option value="alle" {% if jahr_auswahl == 'alle' %}selected{% endif %}>Alle Jahre</option>
      {% for y in jahre %}
        <option value="{{ y }}" {% if y|string == jahr_auswahl|string %}selected{% endif %}>{{ y }}</option>
      {% endfor %}
    </select>
  </form>

  
  <div class="plot-box">
    {{ plot_html|safe }}
  </div>
  
  {% if break_even_monat %}
    <p style="color:green; font-weight:bold; text-align: center; margin-top: 20px;">
      Break-Even erreicht in: <strong>{{ break_even_monat }}</strong>
    </p>
  {% else %}
    <p style="color:red; text-align: center; margin-top: 20px;">
      Break-Even wurde noch nicht erreicht.
    </p>
  {% endif %}

  <div class="nav-links">
    <a href="{{ url_for('home') }}" class="button-link">Zur√ºck zur Startseite</a>
    <a href="{{ url_for('monatsdaten') }}" class="button-link">Zu den Monatsdaten</a>
  </div>
</div>

<style>
  .jahr-filter {
    text-align: center;
    margin-bottom: 30px;
  }

  .jahr-filter select {
    padding: 10px 20px;
    border: 2px solid #779FB5;
    border-radius: 8px;
    font-size: 16px;
    background: white;
    cursor: pointer;
  }

  .plot-container {
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    margin-bottom: 30px;
  }

  .break-even-info {
    background: #E8F4F8;
    border-left: 5px solid #779FB5;
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    text-align: center;
  }

  .break-even-info h3 {
    color: #002F6C;
    margin-bottom: 10px;
  }
</style>
</style>
{% endblock %}